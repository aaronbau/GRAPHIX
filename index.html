<html>
	<head>
		<title>Explorer</title>
		<style>
			body { 
				margin: 0; 
				background-image: url("resources/space.jpg");
			}
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/controls/OrbitControls.js"></script>
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );

			var controls = new THREE.OrbitControls( camera );

			//controls.update() must be called after any manual changes to the camera's transform
			camera.position.set(100, 100, 20 );
			controls.update();

			var OBJECTS = [];

			var renderer = new THREE.WebGLRenderer({ alpha: true });
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			//scene.add( new THREE.AxesHelper( 20 ));

			renderer.setClearColor( 0xffffff, 0);

			var sunGeometry = new THREE.SphereGeometry( 5, 32, 32 );
			var mercuryGeometry = new THREE.SphereGeometry( 1, 32, 32 );
			var venusGeometry = new THREE.SphereGeometry( 1.5, 32, 32 );
			var earthGeometry = new THREE.SphereGeometry( 1.5, 32, 32 );
			var marsGeometry = new THREE.SphereGeometry( 1.5, 32, 32 );
			var jupiterGeometry = new THREE.SphereGeometry( 2.5, 32, 32 );
			var saturnGeometry = new THREE.SphereGeometry( 2.5, 32, 32 );
			var uranusGeometry = new THREE.SphereGeometry( 1.5, 32, 32 );
			var neptuneGeometry = new THREE.SphereGeometry( 1.5, 32, 32 );
			var plutoGeometry = new THREE.SphereGeometry( 1, 32, 32 );

			var texture = new THREE.TextureLoader().load( 'resources/sun.jpeg' );
			var sunMaterial = new THREE.MeshBasicMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/mercury.jpg' );
			var mercuryMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/venus.jpg' );
			var venusMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/earth.jpg' );
			var earthMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/mars.jpg' );
			var marsMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/jupiter.jpg' );
			var jupiterMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/saturn.jpg' );
			var saturnMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/uranus.jpg' );
			var uranusMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/neptune.jpg' );
			var neptuneMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			texture = new THREE.TextureLoader().load( 'resources/pluto.jpg' );
			var plutoMaterial = new THREE.MeshLambertMaterial( { map: texture } );

			var sunSphere = new THREE.Mesh( sunGeometry, sunMaterial );
			var mercurySphere = new THREE.Mesh( mercuryGeometry, mercuryMaterial );			
			var venusSphere = new THREE.Mesh( venusGeometry, venusMaterial );			
			var earthSphere = new THREE.Mesh( earthGeometry, earthMaterial );
			var marsSphere = new THREE.Mesh( marsGeometry, marsMaterial );			
			var jupiterSphere = new THREE.Mesh( jupiterGeometry, jupiterMaterial );
			var saturnSphere = new THREE.Mesh( saturnGeometry, saturnMaterial );
			var uranusSphere = new THREE.Mesh( uranusGeometry, uranusMaterial );			
			var neptuneSphere = new THREE.Mesh( neptuneGeometry, neptuneMaterial );
			var plutoSphere = new THREE.Mesh( plutoGeometry, plutoMaterial );
			
			scene.add( sunSphere );
			scene.add( mercurySphere );
			scene.add( venusSphere );
			scene.add( earthSphere );
			scene.add( marsSphere );
			scene.add( jupiterSphere );
			scene.add( saturnSphere );
			scene.add( uranusSphere );
			scene.add( neptuneSphere );
			scene.add( plutoSphere );

			var newpos = 1;

			newpos += 8;
			mercurySphere.position.x = newpos;
			mercurySphere.position.z = 7;
			
			newpos += 5;
			venusSphere.position.x = -newpos;
			venusSphere.position.z = -2;
			
			newpos += 5;
			earthSphere.position.x = newpos;
			earthSphere.position.z = -3;
			
			newpos += 5;
			marsSphere.position.x = -newpos;
			marsSphere.position.z = 7;
			
			newpos += 5;
			newpos += 5;
			jupiterSphere.position.x = newpos;
			jupiterSphere.position.z = 3;
			
			newpos += 7;
			saturnSphere.position.x = -newpos;
			saturnSphere.position.z = -2;
			
			newpos += 5;
			uranusSphere.position.x = newpos;
			uranusSphere.position.z = -1;

			
			newpos += 5;
			neptuneSphere.position.x = -newpos;
			neptuneSphere.position.z = 6;
			
			newpos += 5;
			plutoSphere.position.x = newpos;
			plutoSphere.position.z = 5;			

			camera.position.z = 20;

			mercuryParent = new THREE.Object3D();
			venusParent = new THREE.Object3D();
			earthParent = new THREE.Object3D();
			marsParent = new THREE.Object3D();
			jupiterParent = new THREE.Object3D();
			saturnParent = new THREE.Object3D();
			uranusParent = new THREE.Object3D();
			neptuneParent = new THREE.Object3D();
			plutoParent = new THREE.Object3D();

			mercuryParent.add( mercurySphere );
			venusParent.add( venusSphere );
			earthParent.add( earthSphere );
			marsParent.add( marsSphere );
			jupiterParent.add( jupiterSphere );
			saturnParent.add( saturnSphere );
			uranusParent.add( uranusSphere );
			neptuneParent.add( neptuneSphere );
			plutoParent.add( plutoSphere );

			scene.add( mercuryParent );
			scene.add( venusParent );
			scene.add( earthParent );
			scene.add( marsParent );
			scene.add( jupiterParent );
			scene.add( saturnParent );
			scene.add( uranusParent );
			scene.add( neptuneParent );
			scene.add( plutoParent );

			var saturnRingGeometry = new THREE.TorusGeometry( 4, 0.5, 2, 100 );
			texture = new THREE.TextureLoader().load( 'resources/pluto.jpg' );
			var saturnRingMaterial = new THREE.MeshLambertMaterial( { map: texture } );
			var saturnRing = new THREE.Mesh( saturnRingGeometry, saturnRingMaterial );
			scene.add( saturnRing );
			saturnRing.rotation.x = 90;

			saturnSphere.add(saturnRing);

			var light = new THREE.SpotLight(0xffd8af, 2, 200, 360, 2, 2);
			light.intensity = 4;
			scene.add( light );

			var animate = function () {
				requestAnimationFrame( animate );
				
				sunSphere.rotation.y += 0.03;
				mercurySphere.rotation.y += 0.03;
			    venusSphere.rotation.y += 0.03;
			    earthSphere.rotation.y += 0.03;
			    marsSphere.rotation.y += 0.03;
			    jupiterSphere.rotation.y += 0.03;
			    saturnSphere.rotation.y += 0.03;			    
			    uranusSphere.rotation.y += 0.03;
			    neptuneSphere.rotation.y += 0.03;
			    plutoSphere.rotation.y += 0.03;

				mercuryParent.rotation.y += 0.01;
				venusParent.rotation.y += 0.009;
				earthParent.rotation.y += 0.008;
				marsParent.rotation.y += 0.007;
				jupiterParent.rotation.y += 0.006;
				saturnParent.rotation.y += 0.005;
				uranusParent.rotation.y += 0.004;
				neptuneParent.rotation.y += 0.003;
				plutoParent.rotation.y += 0.002;

				renderer.render(scene, camera);
			};

			animate();

			OBJECTS.push( sunSphere );
			OBJECTS.push( mercurySphere );
			OBJECTS.push( venusSphere );
			OBJECTS.push( earthSphere );
			OBJECTS.push( marsSphere );
			OBJECTS.push( jupiterSphere );
			OBJECTS.push( saturnSphere );
			OBJECTS.push( uranusSphere );
			OBJECTS.push( neptuneSphere );
			OBJECTS.push( plutoSphere );

			sunSphere.name = "Sun";
			mercurySphere.name = "Mercury";
			venusSphere.name = "Venus";
			earthSphere.name = "Earth";
			marsSphere.name = "Mars";
			jupiterSphere.name = "Jupiter";
			saturnSphere.name = "Saturn";
			uranusSphere.name = "Uranus";
			neptuneSphere.name ="Neptune";
			plutoSphere.name = "Pluto";

			document.addEventListener( 'mousedown', onDocumentMouseDown, false );

			function onDocumentMouseDown( event ) {

			    event.preventDefault();

			    var vector = new THREE.Vector3(
			        ( event.clientX / window.innerWidth ) * 2 - 1,
			      - ( event.clientY / window.innerHeight ) * 2 + 1,
			        0.5
			    );
			    
			    vector.unproject(camera);

			    var ray = new THREE.Raycaster( camera.position, 
			                             vector.sub( camera.position ).normalize() );

			    var intersects = ray.intersectObjects( OBJECTS );

			    if ( intersects.length > 0 ) {
			        switch(intersects[0].object.name){
			        	case "Sun":
			        		window.location.href = "skybox/sun.html";
			        		break;
			        	case "Mercury":
			        		window.location.href = "skybox/mercury.html";
			        		break;
			        	case "Venus":
			        		window.location.href = "skybox/venus.html";
			        		break;
			        	case "Earth":
			        		window.location.href = "skybox/earth.html";
			        		break;
			        	case "Mars":
			        		window.location.href = "skybox/mars.html";
			        		break;
			        	case "Jupiter":
			        		window.location.href = "skybox/jupiter.html";
			        		break;
			        	case "Saturn":
			        		window.location.href = "skybox/saturn.html";
			        		break;
			        	case "Uranus":
			        		window.location.href = "skybox/uranus.html";
			        		break;
			        	case "Neptune":
			        		window.location.href = "skybox/neptune.html";
			        		break;
			        	case "Pluto":
			        		window.location.href = "skybox/pluto.html";
			        		break;
			        	default:
			        		break;
			        }
			    }
			}

		</script>
	</body>
</html>